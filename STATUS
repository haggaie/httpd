APACHE 2.2 STATUS:                                              -*-text-*-
Last modified at [$Date$]

The current version of this file can be found at:

  * http://svn.apache.org/repos/asf/httpd/httpd/branches/2.2.x/STATUS

Documentation status is maintained seperately and can be found at:

  * docs/STATUS in this source tree, or
  * http://svn.apache.org/repos/asf/httpd/httpd/trunk/docs/STATUS

Consult the following STATUS files for information on related projects:

  * http://svn.apache.org/repos/asf/apr/apr/trunk/STATUS
  * http://svn.apache.org/repos/asf/apr/apr-util/trunk/STATUS

Patches considered for backport are noted in their branches' STATUS:

  * http://svn.apache.org/repos/asf/httpd/httpd/branches/1.3.x/STATUS
  * http://svn.apache.org/repos/asf/httpd/httpd/branches/2.0.x/STATUS
  * http://svn.apache.org/repos/asf/httpd/httpd/branches/2.2.x/STATUS


Release history:
    [NOTE that x.{odd}.z versions are strictly Alpha/Beta releases,
          while x.{even}.z versions are Stable/GA releases.]

    2.2.7   : In development
    2.2.6   : Released September 7, 2007.
    2.2.5   : Tagged August 10, 2007, not released.
    2.2.4   : Released on January 9, 2007 as GA.
    2.2.3   : Released on July 28, 2006 as GA.
    2.2.2   : Released on May 1, 2006 as GA.
    2.2.1   : Tagged on April 1, 2006, not released.
    2.2.0   : Released on December 1, 2005 as GA.
    2.1.10  : Tagged on November 19, 2005, not released.
    2.1.9   : Released on November 5, 2005 as beta.
    2.1.8   : Released on October 1, 2005 as beta.
    2.1.7   : Released on September 12, 2005 as beta.
    2.1.6   : Released on June 27, 2005 as alpha.
    2.1.5   : Tagged on June 17, 2005.
    2.1.4   : not released.
    2.1.3   : Released on  February 22, 2005 as alpha.
    2.1.2   : Released on December 8, 2004 as alpha.
    2.1.1   : Released on November 19, 2004 as alpha.
    2.1.0   : not released.


Contributors looking for a mission:

    * Just do an egrep on "TODO" or "XXX" in the source.

    * Review the bug database at: http://issues.apache.org/bugzilla/

    * Review the "PatchAvailable" bugs in the bug database:

      https://issues.apache.org/bugzilla/buglist.cgi?bug_status=NEW&bug_status=ASSIGNED&bug_status=REOPENED&product=Apache+httpd-2&keywords=PatchAvailable

      After testing, you can append a comment saying "Reviewed and tested".

    * Open bugs in the bug database.


CURRENT RELEASE NOTES:

    * Forward binary compatibility is expected of Apache 2.2.x releases, such
      that no MMN major number changes will occur.  Such changes can only be
      made in the trunk.

    * All commits to branches/2.2.x must be reflected in SVN trunk,
      as well, if they apply.  Logical progression is commit to trunk,
      get feedback and votes on list or in STATUS, then merge into
      branches/2.2.x, as applicable.


RELEASE SHOWSTOPPERS:

PATCHES ACCEPTED TO BACKPORT FROM TRUNK:
  [ start all new proposals below, under PATCHES PROPOSED. ]

    * multiple files, Trivial cleanups
      PR: 39518 - Christophe JAILLET
      trunk:
         http://svn.apache.org/viewvc?view=rev&revision=557837
         http://svn.apache.org/viewvc?view=rev&revision=557972
      2.2.x
         http://people.apache.org/~rpluem/patches/code_clean.diff
      +1: rpluem, trawick, niq

   * mod_include: Add an "if" directive syntax to test whether an URL
     is accessible, and if so, conditionally display content. This
     allows a webmaster to hide a link to a private page when the user
     has no access to that page.
     http://svn.apache.org/viewvc?view=rev&revision=571872
     http://svn.apache.org/viewvc?view=rev&revision=571927
     http://svn.apache.org/viewvc?view=rev&revision=572136
     +1: minfrin, jim, niq

PATCHES PROPOSED TO BACKPORT FROM TRUNK:
  [ New proposals should be added at the end of the list ]

    * mod_rewrite: Also set the Vary header if a rewrite condition is true and
      uses a HTTP header, but all remaining rewrite conditions are skipped due
      to the [OR] flag.
      Trunk version of patch:
         http://svn.apache.org/viewcvs.cgi?rev=574201&view=rev
      Backport version for 2.2.x of patch:
         Trunk version of patch works
      +1: rpluem, niq
      +0: jim: I'm curious that if this would result in some
               "regressions" for some users who either depend on
               the old behavior or have worked around it...
          rpluem answers: If r574684 is backported (see below) these users can
          fix it without workarounds and a clear and promised behaviour.
          Relying on the above is relying on a buggy iundocumented behaviour,
          but yes I do this sometimes by myself :-).
      +1: jim: iff r574684 is also backported

    * mod_rewrite: Add the novary flag to RewriteCond in order to prevent
      the appending of HTTP headers used in a rewrite condition to the Vary
      header of the response.
      Trunk version of patch:
         http://svn.apache.org/viewcvs.cgi?rev=574684&view=rev
      Backport version for 2.2.x of patch:
         Trunk version of patch works
      +1: rpluem, jim

   * core log.c: Work around possible solutions rejected by apr for
     the old implementation of apr_proc_create(), and explicitly pass
     the output and error channels to all log processes created.
     This goes all the way back to piped logs failing to run on win32.
     Not in or needed at trunk/, as apr 1.3.0 has the proper fix.
       http://people.apache.org/~wrowe/httpd-2.0-2.2-procattr-bugfix-log.c.patch
     +1: wrowe
     rpluem says: Is this really the correct thing to do on UNIX? I am not sure
     if all dup2 implementation notice that both fd's are the same. Otherwise
     they close stdout/stderr first and dup a then closed fd in stdout/stderr,
     leaving us without stdout/stderr in the child.

   * core: backport ap_send_interim_response API
     http://svn.apache.org/viewvc?view=rev&revision=582630
     http://svn.apache.org/viewvc?view=rev&revision=582652
     http://svn.apache.org/viewvc?view=rev&revision=588806
     +1: niq
     niq says: It has been suggested the function should move to http_filters.
               I'm OK with that if others feel happier that way.  The function
               declaration presumably remains in http_protocol.h, so no API
               change.
     rpluem says: Please merge this proposal with the one for PR 16518
                  below as both contain the same revision to backport (r588806)
                  and this backport here has conflicts because it misses
                  r582631. BTW I am +1 on a backport that contains all revisons
                  (582630, 582652, 582631, 588806).

   * mod_proxy_http: Correctly forward unexpected interim (HTTP 1xx) responses
     PR 16518
     http://svn.apache.org/viewvc?view=rev&revision=582631
     http://svn.apache.org/viewvc?view=rev&revision=588806
     +1: niq, rpluem
     -0: jim (how is this related to ap_send_interim_response above?)

   * server/protocol.c: Prevent 1-byte overflow on 8192 boundary in
     ap_vrprintf(). PR 43310
     trunk:
        http://svn.apache.org/viewvc?view=rev&revision=589461
     2.2.x:
        Trunk version of patch works
     +1: jim, rpluem
     niq: Doesn't allocating 2^n+1 bytes risk being horribly inefficient?
          Would it make sense to reduce AP_IOBUFSIZE to 8091 so buf doesn't
          go one over a big boundary?
     jim: The issue is that we allocate an array of AP_IOBUFSIZE
          but go beyond that (note we send the end to curpos+AP_IOBUFSIZE)
          so it's not just reducing AP_IOBUFSIZE since then we would
          hit the bug at 8191 boundary instead of the 8192 one.
          The actual PR suggests simply removing the setting of '\0'
          which looks good, but there are loads of places in the related
          code where we use AP_IOBUFSIZE, so it seemed safer to me to
          simply allocate an extra byte. Note that other sections of
          code do this by setting the endpos to one less to "save"
          space for the NUL, but they don't have related sections
          which assume a set size; this does (AP_IOBUFSIZE).

   * mod_status: For long request lines we only see the front part of
     the requests in mod_status, which is useless if they only vary
     in their ending bits. Allow admin to specify whether they want
     to see the 1st 63 chars of the request, or the last.
     trunk:
        http://svn.apache.org/viewvc?view=rev&revision=590641
     2.2.x:
        http://people.apache.org/~jim/patches/reqtail-patch.txt
     +1: jim, rpluem

   * http_filters: Fix handling of unrecognised Transfer Encodings
     PR 43882
     http://svn.apache.org/viewvc/httpd/httpd/trunk/modules/http/http_filters.c?r1=592951&r2=599137
     http://svn.apache.org/viewvc/httpd/httpd/trunk/CHANGES?r1=595672&r2=595671&pathrev=595672 (CHANGES)
     +1: niq, rpluem
     niq says: modified in 599059 (following suggestion by trawick)

    * mod_proxy: Support variable interpolation in reverse proxy configuration
      (revised proposal dealing with wrowe's concerns).
      trunk:
        http://svn.apache.org/viewvc?view=rev&revision=421686  (code)
        http://svn.apache.org/viewvc?view=rev&revision=422178  (code)
        http://svn.apache.org/viewvc/httpd/httpd/trunk/docs/manual/mod/mod_proxy.xml?r1=420990&r2=421725 (docs)
        http://svn.apache.org/viewvc?view=rev&revision=589371  (code+docs)
      2.2.x:
        http://people.apache.org/~niq/proxy-interp.patch
      rpluem says: Please add the documentation to your 2.2.x version of your
                   patch and a minor bump (changes to public mod_proxy.h) and
                   assume you are +1 to your own proposal.


   * mod_ssl: Enable to build with OpenSSL 0.9.9
     trunk:
        http://svn.apache.org/viewvc?view=rev&revision=598019
     2.2.x:
        Trunk patches apply
     +1: fuankg, rpluem

   * mod_substitute: New module for on-the-fly response rewrite-like
     capability.
     trunk:
        http://svn.apache.org/viewvc/httpd/httpd/trunk/modules/experimental/mod_substitute.c?view=log
        Don't even bother...
     2.2.x:
        http://people.apache.org/~jim/patches/mod_substitute-2.2.txt
     +1: jim
     +0: rpluem says: There is much copying in do_pattmatch in the flatten case
                      and I would like to see the usage of tpool in the usage of
                      the SEDSCAT macro.

   * mod_proxy_balancer: Remove the broken attempt to change balancer
     params on-the-fly via the admin manager.
     trunk:
        http://svn.apache.org/viewvc?view=rev&revision=551099 (kinda)
     2.2.x:
        http://people.apache.org/~jim/patches/bsel-patch.txt
     +1: jim
     rpluem says: I don't get the reason for the include of <unistd.h>. There
     is no call to getpid anywhere in mod_proxy_balancer (it was removed on
     trunk in r394065). If you remove the include from your proposal I am +1.

PATCHES/ISSUES THAT ARE STALLED

   * beos MPM: Create pmain pool and run modules' child_init hooks when
     entering ap_mpm_run(), then destroy pmain when exiting ap_mpm_run().
     Otherwise modules' child_init hooks appear to never be executed.
     Also, destroying pmain ensures that cleanups registered in modules'
     child_init hooks are performed (e.g., mod_log_config and mod_dbd).
     Trunk version of patch:
       http://svn.apache.org/viewvc?view=rev&revision=491922
     2.2.x version of patch:
       http://people.apache.org/~chrisd/patches/mod_dbd_pools_groups/mpm_child_init-beos-2.2.x.patch
     +0: chrisd (abstaining; unable to test)

    * PKCS#7: backport PCKS#7 patches from trunk.
      +1 ben
      jerenkrantz: What's the revision number to backport?
      wrowe asks: ditto jerenkrantz
      sctemme: svn blame suggests r424707
      rpluem: Digging through the history suggests that
              r424735
              r424821
              r424823
              need to be added to this. See also
              http://mail-archives.apache.org/mod_mbox/httpd-dev/200607.mbox/%3c20060723093125.GA19423@redhat.com%3e
              and follow ups for more details.
